!function(t,r){"function"==typeof define&&define.amd?define([],r):"object"==typeof module&&module.exports?module.exports=r():t.IMIStructuredItemNameParser=r()}(this,function(){"use strict";function fr(t,r,e,n){this.message=t,this.expected=r,this.found=e,this.location=n,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,fr)}return function(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}(fr,Error),fr.buildMessage=function(t,r){var e,c={literal:function(t){return'"'+u(t.text)+'"'},class:function(t){var r,e="";for(r=0;r<t.parts.length;r++)e+=t.parts[r]instanceof Array?a(t.parts[r][0])+"-"+a(t.parts[r][1]):a(t.parts[r]);return"["+(t.inverted?"^":"")+e+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function u(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+n(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+n(t)})}function a(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+n(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+n(t)})}return"Expected "+function(t){var r,e,n,u=new Array(t.length);for(r=0;r<t.length;r++)u[r]=(n=t[r],c[n.type](n));if(u.sort(),0<u.length){for(e=r=1;r<u.length;r++)u[r-1]!==u[r]&&(u[e]=u[r],e++);u.length=e}switch(u.length){case 1:return u[0];case 2:return u[0]+" or "+u[1];default:return u.slice(0,-1).join(", ")+", or "+u[u.length-1]}}(t)+" but "+((e=r)?'"'+u(e)+'"':"end of input")+" found."},{SyntaxError:fr,parse:function(p,t){t=void 0!==t?t:{};var r,d={},e={start:Wt},n=Wt,u=function(t){return t},g=function(t,r,e,n,u){var c=r;return e.forEach(function(t){c.next=t,c=c.next}),t&&(c.key=!0),n&&(c.language=n),u&&(c.delimiter=!0),r},x=function(t,r){return r.key=!0,r},a=function(t,r){var e={name:r};return t&&(e.prefix=t),e},o=function(t,r,e){return r&&(t.group=r),e&&0<e.length&&(t.restriction=e),t},i=":",f=Jt(":",!1),F=function(t){return t},A="{",v=Jt("{",!1),C="}",m=Jt("}",!1),y="=",E=Jt("=",!1),D=function(t,r){return t.value=r,t},w="@",b=Jt("@",!1),S=function(t){return t},j=">",k=Jt(">",!1),c="*",s=Jt("*",!1),R='"',I=Jt('"',!1),M=/^[^"]/,z=Kt(['"'],!0,!1),T=function(t){return t.join("")},h='\\"',l=Jt('\\"',!1),Z=function(){return'"'},_="'",B=Jt("'",!1),N=/^[^']/,P=Kt(["'"],!0,!1),U="\\'",q=Jt("\\'",!1),G=function(){return"'"},H="[",J=Jt("[",!1),K=/^[^\]]/,L=Kt(["]"],!0,!1),O="]",Q=Jt("]",!1),V=function(t){return t.join("")},W=function(t,r){return t+(r?r.join(""):"")},X=/^[A-Z]/,Y=Kt([["A","Z"]],!1,!1),$=/^[_]/,tt=Kt(["_"],!1,!1),rt=/^[a-z]/,et=Kt([["a","z"]],!1,!1),nt=/^[\xC0-\xD6]/,ut=Kt([["À","Ö"]],!1,!1),ct=/^[\xD8-\xF6]/,at=Kt([["Ø","ö"]],!1,!1),ot=/^[\xF8-\u02FF]/,it=Kt([["ø","˿"]],!1,!1),ft=/^[\u0370-\u037D]/,st=Kt([["Ͱ","ͽ"]],!1,!1),ht=/^[\u037F-\u1FFF]/,lt=Kt([["Ϳ","῿"]],!1,!1),At=/^[\u200C-\u200D]/,pt=Kt([["‌","‍"]],!1,!1),dt=/^[\u2070-\u218F]/,gt=Kt([["⁰","↏"]],!1,!1),xt=/^[\u2C00-\u2FEF]/,Ft=Kt([["Ⰰ","⿯"]],!1,!1),vt=/^[\u3001-\uD7FF]/,Ct=Kt([["、","퟿"]],!1,!1),mt=/^[\uF900-\uFDCF]/,yt=Kt([["豈","﷏"]],!1,!1),Et=/^[\uFDF0-\uFFFD]/,Dt=Kt([["ﷰ","�"]],!1,!1),wt=/^[\-]/,bt=Kt(["-"],!1,!1),St=/^[.]/,jt=Kt(["."],!1,!1),kt=/^[0-9]/,Rt=Kt([["0","9"]],!1,!1),It=/^[\xB7]/,Mt=Kt(["·"],!1,!1),zt=/^[\u0300-\u036F]/,Tt=Kt([["̀","ͯ"]],!1,!1),Zt=/^[\u203F-\u2040]/,_t=Kt([["‿","⁀"]],!1,!1),Bt=/^[ \t\r\n\f]/,Nt=Kt([" ","\t","\r","\n","\f"],!1,!1),Pt=0,Ut=[{line:1,column:1}],qt=0,Gt=[],Ht=0;if("startRule"in t){if(!(t.startRule in e))throw new Error("Can't start parsing from rule \""+t.startRule+'".');n=e[t.startRule]}function Jt(t,r){return{type:"literal",text:t,ignoreCase:r}}function Kt(t,r,e){return{type:"class",parts:t,inverted:r,ignoreCase:e}}function Lt(t){var r,e=Ut[t];if(e)return e;for(r=t-1;!Ut[r];)r--;for(e={line:(e=Ut[r]).line,column:e.column};r<t;)10===p.charCodeAt(r)?(e.line++,e.column=1):e.column++,r++;return Ut[t]=e}function Ot(t,r){var e=Lt(t),n=Lt(r);return{start:{offset:t,line:e.line,column:e.column},end:{offset:r,line:n.line,column:n.column}}}function Qt(t){Pt<qt||(qt<Pt&&(qt=Pt,Gt=[]),Gt.push(t))}function Vt(t,r,e){return new fr(fr.buildMessage(t,r),t,r,e)}function Wt(){var t,r;return t=Pt,t=(r=function(){var t,r,e,n,u,c,a,o,i,f,s,h,l,A;if(t=Pt,(r=ir())!==d)if((e=er())===d&&(e=null),e!==d)if((n=Yt())!==d){if(u=[],(c=rr())!==d)for(;c!==d;)u.push(c),c=rr();else u=d;t=u!==d&&(c=ir())!==d?(h=Pt,(a=h=ir()!==d?(64===p.charCodeAt(Pt)?(l=w,Pt++):(l=d,0===Ht&&Qt(b)),l!==d&&ir()!==d&&(A=cr())!==d?F(A):(Pt=h,d)):(Pt=h,d))===d&&(a=null),a!==d&&ir()!==d?(i=Pt,(o=i=(f=ir())!==d?(62===p.charCodeAt(Pt)?(s=j,Pt++):(s=d,0===Ht&&Qt(k)),s!==d?f=[f,s]:(Pt=i,d)):(Pt=i,d))===d&&(o=null),o!==d?r=g(e,n,u,a,o):(Pt=t,d)):(Pt=t,d)):(Pt=t,d)}else Pt=t,t=d;else Pt=t,t=d;else Pt=t,t=d;return t===d&&(t=Pt,r=ir(),t=r!==d&&(e=er())!==d&&(n=Yt())!==d?r=x(e,n):(Pt=t,d)),t}())!==d&&ir()!==d?r=u(r):(Pt=t,d)}function Xt(){var t,r,e,n,u,c;return t=Pt,t=ir()!==d?(n=Pt,(r=n=ir()!==d&&(u=cr())!==d&&ir()!==d?(58===p.charCodeAt(Pt)?(c=i,Pt++):(c=d,0===Ht&&Qt(f)),c!==d?F(u):(Pt=n,d)):(Pt=n,d))===d&&(r=null),r!==d&&ir()!==d&&(e=cr())!==d?a(r,e):(Pt=t,d)):(Pt=t,d)}function Yt(){var t,r,e,n,u;if(t=Pt,ir()!==d)if((r=Xt())!==d)if(ir()!==d)if((e=$t())===d&&(e=null),e!==d){for(n=[],u=tr();u!==d;)n.push(u),u=tr();t=n!==d?o(r,e,n):(Pt=t,d)}else Pt=t,t=d;else Pt=t,t=d;else Pt=t,t=d;else Pt=t,t=d;return t}function $t(){var t,r;return t=Pt,t=ir()!==d&&(r=function(){var t,r,e,n;if(t=Pt,91===p.charCodeAt(Pt)?(r=H,Pt++):(r=d,0===Ht&&Qt(J)),r!==d){if(e=[],K.test(p.charAt(Pt))?(n=p.charAt(Pt),Pt++):(n=d,0===Ht&&Qt(L)),n!==d)for(;n!==d;)e.push(n),K.test(p.charAt(Pt))?(n=p.charAt(Pt),Pt++):(n=d,0===Ht&&Qt(L));else e=d;t=e!==d?(93===p.charCodeAt(Pt)?(n=O,Pt++):(n=d,0===Ht&&Qt(Q)),n!==d?r=V(e):(Pt=t,d)):(Pt=t,d)}else Pt=t,t=d;return t}())!==d?F(r):(Pt=t,d)}function tr(){var t,r,e,n,u,c,a,o,i,f,s,h,l;return t=Pt,t=ir()!==d?(123===p.charCodeAt(Pt)?(r=A,Pt++):(r=d,0===Ht&&Qt(v)),r!==d?(o=Pt,(e=o=ir()!==d&&(i=Xt())!==d&&ir()!==d?(61===p.charCodeAt(Pt)?(f=y,Pt++):(f=d,0===Ht&&Qt(E)),f!==d&&ir()!==d?(h=Pt,(s=h=ir()!==d?((l=function(){var t,r,e,n;if(t=Pt,39===p.charCodeAt(Pt)?(r=_,Pt++):(r=d,0===Ht&&Qt(B)),r!==d){for(e=[],(n=ur())===d&&(N.test(p.charAt(Pt))?(n=p.charAt(Pt),Pt++):(n=d,0===Ht&&Qt(P)));n!==d;)e.push(n),(n=ur())===d&&(N.test(p.charAt(Pt))?(n=p.charAt(Pt),Pt++):(n=d,0===Ht&&Qt(P)));t=e!==d?(39===p.charCodeAt(Pt)?(n=_,Pt++):(n=d,0===Ht&&Qt(B)),n!==d?r=T(e):(Pt=t,d)):(Pt=t,d)}else Pt=t,t=d;return t}())===d&&(l=function(){var t,r,e,n;if(t=Pt,34===p.charCodeAt(Pt)?(r=R,Pt++):(r=d,0===Ht&&Qt(I)),r!==d){for(e=[],(n=nr())===d&&(M.test(p.charAt(Pt))?(n=p.charAt(Pt),Pt++):(n=d,0===Ht&&Qt(z)));n!==d;)e.push(n),(n=nr())===d&&(M.test(p.charAt(Pt))?(n=p.charAt(Pt),Pt++):(n=d,0===Ht&&Qt(z)));t=e!==d?(34===p.charCodeAt(Pt)?(n=R,Pt++):(n=d,0===Ht&&Qt(I)),n!==d?r=T(e):(Pt=t,d)):(Pt=t,d)}else Pt=t,t=d;return t}()),l!==d?F(l):(Pt=h,d)):(Pt=h,d))!==d?D(i,s):(Pt=o,d)):(Pt=o,d)):(Pt=o,d))===d&&(u=Pt,e=u=ir()!==d?(64===p.charCodeAt(Pt)?(c=w,Pt++):(c=d,0===Ht&&Qt(b)),c!==d&&ir()!==d&&(a=Xt())!==d?S(a):(Pt=u,d)):(Pt=u,d)),e!==d&&ir()!==d?(125===p.charCodeAt(Pt)?(n=C,Pt++):(n=d,0===Ht&&Qt(m)),n!==d?F(e):(Pt=t,d)):(Pt=t,d)):(Pt=t,d)):(Pt=t,d)}function rr(){var t,r,e,n,u,c;if(t=Pt,ir()!==d)if(62===p.charCodeAt(Pt)?(r=j,Pt++):(r=d,0===Ht&&Qt(k)),r!==d)if(ir()!==d)if((e=Xt())!==d)if(ir()!==d)if((n=$t())===d&&(n=null),n!==d){for(u=[],c=tr();c!==d;)u.push(c),c=tr();t=u!==d?o(e,n,u):(Pt=t,d)}else Pt=t,t=d;else Pt=t,t=d;else Pt=t,t=d;else Pt=t,t=d;else Pt=t,t=d;else Pt=t,t=d;return t}function er(){var t,r,e;return t=Pt,t=(r=ir())!==d?(42===p.charCodeAt(Pt)?(e=c,Pt++):(e=d,0===Ht&&Qt(s)),e!==d?r=[r,e]:(Pt=t,d)):(Pt=t,d)}function nr(){var t;return Pt,p.substr(Pt,2)===h?(t=h,Pt+=2):(t=d,0===Ht&&Qt(l)),t!==d&&(t=Z()),t}function ur(){var t;return Pt,p.substr(Pt,2)===U?(t=U,Pt+=2):(t=d,0===Ht&&Qt(q)),t!==d&&(t=G()),t}function cr(){var t,r,e,n;if(t=Pt,(r=ar())!==d){for(e=[],n=or();n!==d;)e.push(n),n=or();t=e!==d?r=W(r,e):(Pt=t,d)}else Pt=t,t=d;return t}function ar(){var t;return X.test(p.charAt(Pt))?(t=p.charAt(Pt),Pt++):(t=d,0===Ht&&Qt(Y)),t===d&&($.test(p.charAt(Pt))?(t=p.charAt(Pt),Pt++):(t=d,0===Ht&&Qt(tt)),t===d&&(rt.test(p.charAt(Pt))?(t=p.charAt(Pt),Pt++):(t=d,0===Ht&&Qt(et)),t===d&&(nt.test(p.charAt(Pt))?(t=p.charAt(Pt),Pt++):(t=d,0===Ht&&Qt(ut)),t===d&&(ct.test(p.charAt(Pt))?(t=p.charAt(Pt),Pt++):(t=d,0===Ht&&Qt(at)),t===d&&(ot.test(p.charAt(Pt))?(t=p.charAt(Pt),Pt++):(t=d,0===Ht&&Qt(it)),t===d&&(ft.test(p.charAt(Pt))?(t=p.charAt(Pt),Pt++):(t=d,0===Ht&&Qt(st)),t===d&&(ht.test(p.charAt(Pt))?(t=p.charAt(Pt),Pt++):(t=d,0===Ht&&Qt(lt)),t===d&&(At.test(p.charAt(Pt))?(t=p.charAt(Pt),Pt++):(t=d,0===Ht&&Qt(pt)),t===d&&(dt.test(p.charAt(Pt))?(t=p.charAt(Pt),Pt++):(t=d,0===Ht&&Qt(gt)),t===d&&(xt.test(p.charAt(Pt))?(t=p.charAt(Pt),Pt++):(t=d,0===Ht&&Qt(Ft)),t===d&&(vt.test(p.charAt(Pt))?(t=p.charAt(Pt),Pt++):(t=d,0===Ht&&Qt(Ct)),t===d&&(mt.test(p.charAt(Pt))?(t=p.charAt(Pt),Pt++):(t=d,0===Ht&&Qt(yt)),t===d&&(Et.test(p.charAt(Pt))?(t=p.charAt(Pt),Pt++):(t=d,0===Ht&&Qt(Dt))))))))))))))),t}function or(){var t;return(t=ar())===d&&(wt.test(p.charAt(Pt))?(t=p.charAt(Pt),Pt++):(t=d,0===Ht&&Qt(bt)),t===d&&(St.test(p.charAt(Pt))?(t=p.charAt(Pt),Pt++):(t=d,0===Ht&&Qt(jt)),t===d&&(kt.test(p.charAt(Pt))?(t=p.charAt(Pt),Pt++):(t=d,0===Ht&&Qt(Rt)),t===d&&(It.test(p.charAt(Pt))?(t=p.charAt(Pt),Pt++):(t=d,0===Ht&&Qt(Mt)),t===d&&(zt.test(p.charAt(Pt))?(t=p.charAt(Pt),Pt++):(t=d,0===Ht&&Qt(Tt)),t===d&&(Zt.test(p.charAt(Pt))?(t=p.charAt(Pt),Pt++):(t=d,0===Ht&&Qt(_t)))))))),t}function ir(){var t;return(t=function(){var t,r;if(t=[],Bt.test(p.charAt(Pt))?(r=p.charAt(Pt),Pt++):(r=d,0===Ht&&Qt(Nt)),r!==d)for(;r!==d;)t.push(r),Bt.test(p.charAt(Pt))?(r=p.charAt(Pt),Pt++):(r=d,0===Ht&&Qt(Nt));else t=d;return t}())===d&&(t=null),t}if((r=n())!==d&&Pt===p.length)return r;throw r!==d&&Pt<p.length&&Qt({type:"end"}),Vt(Gt,qt<p.length?p.charAt(qt):null,qt<p.length?Ot(qt,qt+1):Ot(qt,qt))}}});
